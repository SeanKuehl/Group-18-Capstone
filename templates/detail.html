{% load static %}

{% block page_title %}
    <h2 id="PostTitle">{{ post.post_title }}</h2>
{% endblock page_title %}

<script src="{% static 'ClipboardCopyPostScript.js' %}"></script>

{% block page_content %}
    <small>
        {{ post.created_on.date }} | 
        {% if post.accountname %}
                    <a href="{% url 'user_account' post.accountname.pk %}">
                        {{ post.accountname.account_name }}
                    </a>
                {% else %}
                    <!-- Link to superuser account page -->
                    <a href="{% url 'user_account' '0' %}">Superuser</a>
                {% endif %}
        | Tags:
        <small id="DataAndTags">
        {{ post.created_on.date }} | Tags:
        {% for tag in post.tags.all %}
            <a href="{% url 'post_tag' tag.name %}">
                {{ tag.name }}
            </a>
        {% endfor %}
    </small>
    <p>This post has: {{upvotes}} upvotes</p>
    <p>This post has: {{downvotes}} downvotes</p>

    <a href="{% url 'post_detail' pk=post.id action=1 %}">
    <button>Up Vote</button>
    </a>

    <a href="{% url 'post_detail' pk=post.id action=2 %}">
    <button>Down Vote</button>
    </a>

    <p id="PostBody">{{ post.post_body}}</p>
    <button onclick="CopyText()">Copy Text</button>

    <a href="{% url 'report_post' post.id %}">
        <button>Report Post</button>
    </a>
    <p>This post has been reported {{ post.reported_count }} times.</p>

    <h3>Leave a comment:</h3>
    <form method="post">
        {% csrf_token %}
        <div>
            {{ form.author }}
        </div>
        <div>
            {{ form.body }}
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>

    <h3>Comments:</h3>
    {% for comment in comments %}
        <p>
            On {{ comment.created_on.date }} <b>{{ comment.author }}</b> wrote:
        </p>
        <p>
            {{ comment.body | linebreaks }}
        </p>
    {% endfor %}
{% endblock page_content %}
